From 4da5ae5278622fb5140046caac72cae856c5e424 Mon Sep 17 00:00:00 2001
From: Darshan Prajapati <darshan.prajapati@einfochips.com>
Date: Wed, 5 Jun 2024 12:02:50 +0530
Subject: [PATCH 2/5] include: sbi_domain: Added TOR/NAPOT region support

added 'unsigned long tor' in sbi_domain_memregion_init
to define size of TOR region.

Upstream-Status: Pending

Signed-off-by: Darshan Prajapati <darshan.prajapati@einfochips.com>
---
 include/sbi/sbi_domain.h | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/include/sbi/sbi_domain.h b/include/sbi/sbi_domain.h
index c88dbac..8ff71b5 100644
--- a/include/sbi/sbi_domain.h
+++ b/include/sbi/sbi_domain.h
@@ -154,6 +154,9 @@ struct sbi_domain_memregion {
 
 #define SBI_DOMAIN_MEMREGION_MMIO		(1UL << 31)
 	unsigned long flags;
+	/** region for NAPOT(0) or TOR(size) */
+	unsigned long tor;
+
 };
 
 /** Maximum number of domains */
@@ -245,11 +248,13 @@ ulong sbi_domain_get_assigned_hartmask(const struct sbi_domain *dom,
  * @param size physical size of memory region
  * @param flags memory region flags
  * @param reg pointer to memory region being initialized
+ * @param tor 0:NAPOT , other:size of TOR; if use TOR mode, @size only used for region check
  */
 void sbi_domain_memregion_init(unsigned long addr,
 				unsigned long size,
 				unsigned long flags,
-				struct sbi_domain_memregion *reg);
+				struct sbi_domain_memregion *reg,
+				unsigned long tor);
 
 /**
  * Check whether we can access specified address for given mode and
-- 
2.25.1

